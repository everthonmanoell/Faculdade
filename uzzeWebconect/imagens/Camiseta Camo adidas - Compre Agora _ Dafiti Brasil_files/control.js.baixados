"use strict";window.activeTime=1,window.isActive=!0,window.record_keystroke=!1,window.feedbackOnly=!1,window.hcookieinterval=null;const cdnServer="https://"+window._H_CDN_URL,serverUrl="https://api.howuku.com",publicEmailProvider=["gmail.com","yahoo.com","hotmail.com","aol.com","hotmail.co.uk","hotmail.fr","msn.com","yahoo.fr","wanadoo.fr","orange.fr","comcast.net","yahoo.co.uk","yahoo.com.br","yahoo.co.in","live.com","rediffmail.com","free.fr","gmx.de","web.de","yandex.ru","ymail.com","libero.it","outlook.com","uol.com.br","bol.com.br","mail.ru","cox.net","hotmail.it","sbcglobal.net","sfr.fr","live.fr","verizon.net","live.co.uk","googlemail.com","yahoo.es","ig.com.br","live.nl","bigpond.com","terra.com.br","yahoo.it","neuf.fr","yahoo.de","alice.it","rocketmail.com","att.net","laposte.net","facebook.com","bellsouth.net","yahoo.in","hotmail.es","charter.net","yahoo.ca","yahoo.com.au","rambler.ru","hotmail.de","tiscali.it","shaw.ca","yahoo.co.jp","sky.com","earthlink.net","optonline.net","freenet.de","t-online.de","aliceadsl.fr","virgilio.it","home.nl","qq.com","telenet.be","me.com","yahoo.com.ar","tiscali.co.uk","yahoo.com.mx","voila.fr","gmx.net","mail.com","planet.nl","tin.it","live.it","ntlworld.com","arcor.de","yahoo.co.id","frontiernet.net","hetnet.nl","live.com.au","yahoo.com.sg","zonnet.nl","club-internet.fr","juno.com","optusnet.com.au","blueyonder.co.uk","bluewin.ch","skynet.be","sympatico.ca","windstream.net","mac.com","centurytel.net","chello.nl","live.ca","aim.com","bigpond.net.au"];var ajax=(e,o,t,n)=>{var i=new XMLHttpRequest;i.open(o,e,!0),i.setRequestHeader("Content-Type","application/json;charset=UTF-8"),i.onreadystatechange=function(){window.location.href.includes("howuku.com")&&(console.log(e),console.log(this.readyState,this.status),console.log(this.readyState===XMLHttpRequest.DONE||4===this.readyState),console.log(200===this.status)),this.readyState!==XMLHttpRequest.DONE&&4!==this.readyState||200!==this.status||(window.location.href.includes("howuku.com")&&console.log(i.responseText),n(i.responseText))},i.send(JSON.stringify(t))},getCookie=function(e){var o=document.cookie.match("(^|;)\\s*"+e+"\\s*=\\s*([^;]+)");return o?o.pop():""},setCookie=function(e,o,t){if(!window.isCookieless){var n=new Date;n.setHours(n.getHours()+(t||o));var i=function(){for(var e=0,o=document.domain,t=o.split("."),n="_gd"+(new Date).getTime();e<t.length-1&&-1==document.cookie.indexOf(n+"="+n);)o=t.slice(-1-++e).join("."),document.cookie=n+"="+n+";domain="+o+";path=/;";return document.cookie=n+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain="+o+";",o}();document.cookie=e+"="+o+";expires="+n.toString()+";domain=."+i+";path=/;"}};const serializeSelector=e=>{return e.replace(/\#[0-9]/,function(e){return e.replace("#","#\\3")}).replace(/\.[0-9]/,function(e){return e.replace(".",".\\3")})},readUrlParam=e=>{return new URL(window.location.href).searchParams.get(e)||""},howukuCookies=["poll_last_seen","created_at","pageview","poll_responded","first_session","unique_session","_hid","vaId"],composeCookie=()=>{let e={};for(let o=0;o<howukuCookies.length;o++){let t=howukuCookies[o],n=getCookie(t);n&&(e[t]=n)}let o=JSON.stringify(JSON.stringify(e));return"{}"!==o?o:null};window.uploadHowukuCookie=(()=>{clearTimeout(window.hcookieinterval),window.hcookieinterval=setTimeout(()=>{let e=composeCookie();"{}"!==e&&ajax(serverUrl+"/widget/cookie","POST",{uuid:window._h_uuid,cookie:e},()=>{})},1e3)});const loadCookies=(e=null)=>{if(e&&""!==e)try{let o=JSON.parse(JSON.parse(e));Object.keys(o).forEach(function(e,t){let n=o[e];setCookie(e,n)})}catch(e){console.log("loadCookies Err"),console.error(e)}},getRefQueryParam=e=>{e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var o=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===o?"":decodeURIComponent(o[1].replace(/\+/g," "))};function getDomPath(e){var o=[];if(e.id&&1===document.querySelectorAll(e.nodeName.toLowerCase()+"#"+e.id).length)return e.nodeName.toLowerCase()+"#"+e.id;if(e.id&&1===document.querySelectorAll(e.nodeName.toLowerCase()+"."+e.id).length)return e.nodeName.toLowerCase()+"#"+e.id;for(;null!=e.parentNode;){for(var t=0,n=0,i=0;i<e.parentNode.childNodes.length;i++){var r=e.parentNode.childNodes[i];r.nodeName==e.nodeName&&(r===e&&(n=t),t++)}e.hasAttribute("id")&&""!=e.id?o.unshift(e.nodeName.toLowerCase()+"#"+e.id):t>1?o.unshift(e.nodeName.toLowerCase()+":eq("+n+")"):o.unshift(e.nodeName.toLowerCase()),e=e.parentNode}return o.slice(1).join(">")}window.howuku_record=null;let cmdqueue={};window.howuku&&window.howuku.identify&&window.howuku.identify.q&&(cmdqueue.identify=window.howuku.identify.q),window.howuku&&window.howuku.track&&window.howuku.track.q&&(cmdqueue.track=window.howuku.track.q),window.howuku&&window.howuku.converted&&window.howuku.converted.q&&(cmdqueue.converted=window.howuku.converted.q),window.howuku={uuid:window._h_uuid,trackElement:{},identify_old:function(e){return new Promise(function(o){e.hid=window._hid,e.email&&setCookie("identified_user",window.btoa(e.email)),ajax(serverUrl+"/visitor/info","POST",e,function(){o()})})},identify:function(e){return new Promise(function(o){e.hid=window._hid,e.email&&setCookie("identified_user",window.btoa(e.email)),ajax(serverUrl+"/track/"+window._h_key,"POST",e,function(e){let t=JSON.parse(e);window._h_uuid=t.id,window.howuku.uuid=t.id,window._hid=t.id,o()})})},track:function(e,o={}){return o.url_origin=window.location.origin,o.url_path=window.location.pathname,new Promise(function(t){var n={event_type:2,event_path:"",event_text:e,event_property:JSON.stringify(o),session:window._h_session,widget_key:window._h_key,uuid:window._h_uuid,url:window.location.origin+window.location.pathname};navigator.sendBeacon(serverUrl+"/event/addv2",JSON.stringify(n)),setTimeout(()=>{t()},100)})},track_links:function(e,o){for(var t=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=document.querySelectorAll(e),r=0;r<i.length;r++)i[r].addEventListener("click",function(a){t.trackElement[e]&&t.trackElement[e][r]||(a.preventDefault(),t.trackElement[e]={},t.trackElement[e][r]=!0,t.track(o,n).then(function(){i[r].click()}))})},track_forms:function(e,o){for(var t=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=document.querySelectorAll(e.replace(/\#[0-9]/,function(e){return e.replace("#","#\\3")}).replace(/\.[0-9]/,function(e){return e.replace(".",".\\3")})),r=0;r<i.length;r++)i[r].addEventListener("submit",function(e){e.preventDefault(),t.track(o,n).then(function(){i[r].submit()})})},converted:function(e){return new Promise(function(o){navigator.sendBeacon(serverUrl+"/abtest/convertedv2",JSON.stringify({key:e,uuid:window._h_uuid})),o()})},tag:function(e,o={}){return o.url_origin=window.location.origin,o.url_path=window.location.pathname,new Promise(function(t){var n={event_type:2,event_path:"",event_text:e,event_property:JSON.stringify(o),session:window._h_session,widget_key:window._h_key,uuid:window._h_uuid,url:window.location.origin+window.location.pathname};navigator.sendBeacon(serverUrl+"/event/addv2",JSON.stringify(n)),setTimeout(()=>{t()},100)})},event:function(e,o={}){return o.url_origin=window.location.origin,o.url_path=window.location.pathname,new Promise(function(t){var n={event_type:2,event_path:"",event_text:e,event_property:JSON.stringify(o),session:window._h_session,widget_key:window._h_key,uuid:window._h_uuid,url:window.location.origin+window.location.pathname};navigator.sendBeacon(serverUrl+"/event/addv2",JSON.stringify(n)),setTimeout(()=>{t()},100)})},feedback:{show:function(){document.getElementsByClassName("howu")[0].style.display="block"},hide:function(){document.getElementsByClassName("howu")[0].style.display="none"}},survey:{show:function(){document.getElementById("howu-poll-container").style.display="block",document.getElementById("howu-poll-container-minimized").style.display="block",document.getElementById("howu-poll-outer").style.display="block"},hide:function(){document.getElementById("howu-poll-container").style.display="none",document.getElementById("howu-poll-container-minimized").style.display="none",document.getElementById("howu-poll-outer").style.display="none"}},record:{start:function(){null===window.howuku_record||window._h_isRecording||(window.howuku_record(window._h_session,window._h_key),window._h_isRecording=!0)},stop:function(){window._h_isRecording&&(window._h_isRecording=!1)},status:window._h_isRecording},nickname:function(e){var o=e===getCookie("howuku_nickname");if(setCookie("howuku_nickname",e),!o){var t={nickname:e,session:window._h_session};ajax(serverUrl+"/session/nickname","POST",t,function(){}),ajax(serverUrl+"/visitor/info","POST",{hid:window._hid,name:e},function(){})}},session:null},window._init=window.howuku;var howuku=window.howuku,coolDownSpeed=280,rageclickCooldown=1e4,rageClicked=!1,rageClickThreshold=3,clickedElement=null,newClickedElement=null,clicks=0;function findEventAttribute(e){for(;e;){if(e.hasAttribute&&e.hasAttribute("howuku-event"))return e.getAttribute("howuku-event");e=e.parentElement}return null}function getAbsolutePosition(e){let o=e.target.getBoundingClientRect();return{x:e.clientX-o.left,y:e.clientY-o.top}}document.addEventListener("click",function(e){const o=findEventAttribute(e.target);o&&""!==o.trim()&&void 0!==o&&window.howuku.track(o)}),document.addEventListener("click",function(e){if(!rageClicked&&clicks>rageClickThreshold){clicks=0;let o=getAbsolutePosition(e),t=e.clientX,n=e.clientY,i=window.pageXOffset,r=window.pageYOffset,a=window.innerWidth,s=window.innerHeight,c=window.document.title,l=JSON.stringify({x:o.x,y:o.y}),d={};d.x=t,d.y=n,d.ox=i,d.oy=r,d.sx=a,d.sy=s,d.c=l,d.window=c,window.howuku.track("Rage Click",d),rageClicked=!0}if(!e.target.href&&"A"===e.target.nodeName){let o=getAbsolutePosition(e),t=e.clientX,n=e.clientY,i=window.pageXOffset,r=window.pageYOffset,a=window.innerWidth,s=window.innerHeight,c=window.document.title,l=JSON.stringify({x:o.x,y:o.y}),d={};d.x=t,d.y=n,d.ox=i,d.oy=r,d.sx=a,d.sy=s,d.c=l,d.window=c,console.log("Dead click detected: ",e.target),window.howuku.track("Dead Click",d)}newClickedElement=null==e?e.srcElement:e.target,clickedElement==newClickedElement&&e.target!==document.body?clicks+=1:(clicks=0,clickedElement=newClickedElement)}),setInterval(function(){clicks>0&&(clicks-=1)},coolDownSpeed),setInterval(function(){rageClicked&&(rageClicked=!1)},rageclickCooldown);var tagIdentity=function(e){let o={path:null,index:0};if(e instanceof Element){for(var t=[];e&&e.nodeType===Node.ELEMENT_NODE;){var n=e.nodeName.toLowerCase();let o=!1;if(e.id)try{document.querySelectorAll("#"+e.id),o=!0}catch(e){o=!1}if(o&&e.id&&"string"==typeof e.id){n+="#"+e.id,t.unshift(n);break}for(var i=e,r=1;i=i.previousElementSibling;)i.nodeName.toLowerCase()==n&&r++;1!=r&&(n+=":nth-of-type("+r+")"),t.unshift(n),e=e.parentNode}return o={path:t.join(">"),index:0}}},control=function(e,o,t,n=null){var i,r,a=o.documentElement,s=e.navigator,c="",l=!1;e.isCookieless=!1;var d="doNotTrack"in s&&"1"===s.doNotTrack||!("https:"===e.location.protocol||"http:"===e.location.protocol)||!1,u=!1;n&&(l=!0,e.isCookieless=!0),function(){var h;h=t,e._h_key=i=h.getAttribute("key"),(r=h.getAttribute("theme-color"))?a.style.setProperty("--theme-color",r):r="#17a2b8";var w=e.innerWidth,m=e.innerHeight,f=o.documentElement.scrollHeight,k=new Date;k.setMinutes(k.getMinutes()-30),c=l?n:getCookie("howuku_session"),l||c&&!(getCookie("created_at")<+k)?(setCookie("pageview",Number(getCookie("pageview"))+1),setCookie("howuku_session",getCookie("howuku_session"),2)):(c=function(){for(var e="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",o="",t=8;t>0;--t)o+=e[Math.floor(Math.random()*e.length)];return o}(),setCookie("poll_session_seen","[]"),setCookie("howuku_session",c),setCookie("pageview",1),u=!0,getCookie("unique_session")?setCookie("unique_session",Number(getCookie("unique_session"))+1,17520):setCookie("unique_session",1,17520)),getCookie("first_session")||(setCookie("first_session",getCookie("howuku_session"),17520),setCookie("unique_session",1,17520)),e._h_session=l?n:c;var p=new Date;setCookie("created_at",+p);var g={ns:u,r:o.referrer,l:e.location.href,ua:s.userAgent,s:c,dnt:d,width:w,height:m,fullheight:f,utm:function(o,t){t||(t=e.location.href),o=o.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+o+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}("utm"),uuid:e._hid};getCookie("identified_user")&&(g.e=getCookie("identified_user")),e.location.href.includes("howuku.com")&&console.log("query init"),ajax(serverUrl+"/widget/init/"+i,"POST",g,function(t){var n=null;e.location.href.includes("howuku.com")&&console.log("get data from server");try{n=JSON.parse(t)[0]}catch(o){e.location.href.includes("howuku.com")&&(console.log("howuku error"),console.error(o))}if(!n)return void console.log("[Exit] no data found");let r="Howuku",a="The Howuku";if(""!==n.custom_domain&&(r="",a="Your"),n.uuid&&(e._h_uuid=n.uuid,e.howuku.uuid=e._h_uuid,setCookie("_hid",n.uuid,8760),e._hid=n.uuid),readUrlParam("howukuVerify")===i){var s=o.createElement("div");s.innerHTML=`\n        <div id="howuverify">\n          <div style="display: flex;">\n            <div style="flex: 0 0 20%;max-width: 20%;">\n              <img src="https://img.icons8.com/fluent/48/000000/checked.png"/>\n            </div>\n            <div style="flex: 0 0 80%;max-width: 80%;">\n                <b>${r} Installation verified</b>\n                <br>\n                <p>${a} tracking code has been properly installed on this page. Browse your site in this window if you wish to verify installation on any other pages.</p>\n            </div>\n          </div>\n        </div>\n        <style>\n          #howuverify {\n            width: 400px !important;\n            background-color: white !important;\n            border-radius: 4px !important;\n            padding: 24px 24px !important;\n            position: absolute !important;\n            top: 10px !important;\n            left: 10px !important;\n            box-shadow: 0 .5rem 1rem rgba(0,0,0,.15)!important;\n            z-index: 9999999999 !important;\n            font-size: 16px !important;\n            text-align: left !important;\n          }\n          #howuverify b {\n            color:darkslategray!important;\n          }\n          #howuverify p {\n            line-height: 24px !important;\n            padding-bottom: 0px !important;\n            margin-top: 12px !important;\n            margin-bottom: 0px !important;\n            color: darkslategrey !important;\n          }\n          #howuverify img {\n            width: 50px !important;\n          }\n        </style>\n        `,ajax(serverUrl+"/widget/active/"+e._h_key,"GET",{},()=>{o.body.appendChild(s),setTimeout(()=>{try{self.close()}catch(e){}try{e.close()}catch(e){}},100)})}new URLSearchParams(e.location.search).forEach(function(o,t){if((t.startsWith("utm_")||"ref"===t||"referral"===t||"referrer"===t)&&o){let n={};n[t]=o,e.howuku.identify(n)}});const u=o=>{let t={session:c,duration:o,location:e.location.href,uuid:e._hid};navigator.sendBeacon(serverUrl+"/sess/exit",JSON.stringify(t))};if((()=>{var t;function n(){e.isActive=!1}function i(){clearTimeout(t),e.isActive=!0,t=setTimeout(n,3e4)}o.onload=i,o.onmousemove=i,o.onmousedown=i,o.ontouchstart=i,o.onclick=i,o.onkeydown=i,o.addEventListener("scroll",i,!0),setInterval(()=>{e.activeTime>=15&&(u(e.activeTime),e.activeTime=0),"visible"===o.visibilityState&&e.isActive?e.activeTime++:e.activeTime&&(u(e.activeTime),e.activeTime=0)},1e3)})(),o.addEventListener("visibilitychange",function(){"hidden"==o.visibilityState&&(u(e.activeTime),e.activeTime=0)}),cmdqueue.track)for(let e=0;e<cmdqueue.track.length;e++)howuku.track(cmdqueue.track[e][0],cmdqueue.track[e][1]);if(cmdqueue.identify)for(let e=0;e<cmdqueue.identify.length;e++)howuku.identify(cmdqueue.identify[e][0],cmdqueue.identify[e][1]);if(cmdqueue.converted)for(let e=0;e<cmdqueue.converted.length;e++)howuku.converted(cmdqueue.converted[e][0]);var h=n.version;setCookie("howuku_version",h),localStorage.setItem("howuku_version",h),localStorage.removeItem("_abcache"),e._howuku_poll_loaded=!1,e._howuku_feedback_loaded=!1,e._howuku_country_code=n.country_code,e.record_keystroke=n.record_keystroke,e.record_numeric=n.record_numeric;var w=n.record_flag,m=n.heatmap_flag,f=n.spa_flag,k=Number(n.feedback_flag),p=Number(n.poll_flag),_=Number(n.test_flag),v=(n.error_flag,n.paid_plan);e.howuku_paidPlan=v;var y=n.auto_start_record,b=n.widget_color,C=n.identify_flag;!function(e){for(var o=0,t=0;t<e.length;t++)o+=e.charCodeAt(t)-97;Number(o.toString().substr(-1))}(c);{console.log("Tracking initiated");let t=o.createElement("script");if(t.onload=function(){let e=o.querySelectorAll("form");if(e&&e.length)for(let o=0;o<e.length;o++)try{let t="form";e[o]instanceof HTMLElement&&e[o].id&&(t+="#"+e[o].id),e[o]instanceof HTMLElement&&e[o].getAttribute("name")&&(t+='[name="'+e[o].getAttribute("name")+'"]'),initForm(t,i)}catch(e){}},t.type="text/javascript",t.crossorigin="anonymous",t.src=cdnServer+"/js/form.js?v="+h,t.async=!0,o.body.appendChild(t),localStorage.removeItem("_abcache"),!e.feedbackOnly&&_){let o=(e,o,t,n)=>{null!==t&&(t||0===Number(t))&&ajax(serverUrl+"/goal/new","POST",{uuid:e,test_id:o,variant_id:t,key:n},()=>{})},t=(e,o)=>{let t=null;if("string"==typeof e)try{e=JSON.parse(e)}catch(e){return null}return e&&e[o]&&(e[o].vaId||0===e[o].vaId)&&(t=e[o].vaId),t};ajax(serverUrl+"/widget/test","POST",{k:i,h:e.location.host},function(n){localStorage.setItem("_abcache",n);let r=JSON.parse(n);for(let n=0;n<r.length;n++){let a=r[n];e.vaId=localStorage.getItem("_variant_result");let s=t(e.vaId,a.test_id);(s&&""!==s||0===Number(s))&&o(e._h_uuid,a.test_id,s,i)}})}if(C)try{var x=o.querySelectorAll("form");for(let o=0;o<x.length;o++)x[o].addEventListener("submit",function(t){let n="";if(x[o].querySelector("input[type=email]")&&""!==x[o].querySelector("input[type=email]").value&&(n=x[o].querySelector("input[type=email]").value),n){let o=n.split("@")[0].replace(/[0-9]/g,"").replace(/[.-_]/g," "),t=n.split("@")[1];publicEmailProvider.includes(t)&&(t=null),e.howuku.identify({name:o,company:t,email:n}).then(function(){})}})}catch(e){}if(k||p){let t=o.createElement("link");if(t.id="howu-css",t.setAttribute("rel","stylesheet"),t.setAttribute("type","text/css"),t.setAttribute("media","all"),t.setAttribute("href",cdnServer+"/css/style.min.css?v="+h),t.onload=(()=>{}),o.head.insertBefore(t,o.head.childNodes[o.head.childNodes.length-1].nextSibling),e.navigator.userAgent.indexOf("MSIE ")>0||navigator.userAgent.match(/Trident.*rv:11\./)){var S=".howu-tab,.howu-send-btn, .howu-email-btn,#howu-screenshot-instruction,.howu-numbering,.howu-tag,.howu-poll-submit { background-color: "+b+"; }\n                        #howu-screenshot-border {border: 10px solid "+b+";}\n                        .howu-highlight{border: "+b+" 5px solid;}\n                        #howu-screenshot-border{  border: 10px solid "+b+';}\n                        #minimized img { position: static !important; }";',N=o.createElement("style");(o.body||o.getElementsByTagName("body")[0]).appendChild(N),N.type="text/css",N.styleSheet?N.styleSheet.cssText=S:N.appendChild(o.createTextNode(S))}}if(f){var E=location.href;o.documentElement.addEventListener("click",function(){setTimeout(function(){if(g.l=location.href,E!==location.href){if(e.location.href.includes("app.howuku.com")&&console.log("changed SPA"),ajax(serverUrl+"/widget/init/"+i,"POST",g,function(){}),w&&(e.howuku.record.stop(),setTimeout(()=>{e.howuku.record.start()},200)),k){if(o.querySelector("div.howu")){let e=o.querySelector("div.howu");e.parentElement.parentNode.removeChild(e.parentElement)}if(e._howuku_feedback_loaded)ajax(serverUrl+"/widget/feedback/","POST",{k:i,c:e._howuku_country_code,l:e.location.href,uuid:e._h_uuid,isNewUser:l||!l&&getCookie("first_session")===e._h_session?"1":"0"},function(o){var t=JSON.parse(o)[0];if(t&&(e.feedback(t,i,t.feedback_color,cdnServer,serverUrl,c),t.auto_start_feedback)){let o=t.feedback_option_return,n=Number(t.feedback_option_show_after),i=l||!l&&getCookie("first_session")===e._h_session,r=Number(getCookie("unique_session"));(!o||1===o&&i||2===o&&!i&&r>n)&&howuku.feedback.show()}});else{e._howuku_feedback_loaded=!0;var t=o.createElement("script");t.type="text/javascript",t.crossorigin="anonymous",t.src="https://cdnjs.cloudflare.com/ajax/libs/svg.js/2.6.3/svg.min.js",t.async=!0,o.body.appendChild(t),(n=o.createElement("script")).onload=function(){ajax(serverUrl+"/widget/feedback/","POST",{k:i,c:e._howuku_country_code,l:e.location.href,uuid:e._h_uuid,isNewUser:l||!l&&getCookie("first_session")===e._h_session?"1":"0"},function(o){var t=JSON.parse(o)[0];if(t&&(e.feedback(t,i,t.feedback_color,cdnServer,serverUrl,c),t.auto_start_feedback)){let o=t.feedback_option_return,n=Number(t.feedback_option_show_after),i=l||!l&&getCookie("first_session")===e._h_session,r=Number(getCookie("unique_session"));(!o||1===o&&i||2===o&&!i&&r>n)&&howuku.feedback.show()}})},n.type="text/javascript",n.crossorigin="anonymous",n.src=cdnServer+"/js/feedback.js?v="+h,n.async=!0,o.body.appendChild(n)}}var n;if(o.getElementById("howu-poll-outer")&&o.getElementById("howu-poll-outer").parentNode.removeChild(o.getElementById("howu-poll-outer")),e._howuku_poll_loaded)startPoll();else e._howuku_poll_loaded=!0,(n=o.createElement("script")).onload=function(){startPoll()},n.type="text/javascript",n.crossorigin="anonymous",n.src=cdnServer+"/js/poll.js?v="+h,n.async=!0,o.body.appendChild(n);if(localStorage.removeItem("_abcache"),_)try{ajax(serverUrl+"/widget/test","POST",{k:i,h:e.location.host},function(o){localStorage.setItem("_abcache",o),e.startAbTest(o);let t=JSON.parse(o);for(let o=0;o<t.length;o++){let n=t[o];e.vaId=localStorage.getItem("_variant_result");let r=getVaId(e.vaId,n.test_id);(r&&""!==r||0===Number(r))&&setGoal(e._h_uuid,n.test_id,r,i)}})}catch(e){console.error(e)}}E=location.href},100)},!0)}if(e.feedbackOnly||k){e._howuku_feedback_loaded=!0;var T,O=o.createElement("script");O.type="text/javascript",O.crossorigin="anonymous",O.src="https://cdnjs.cloudflare.com/ajax/libs/svg.js/2.6.3/svg.min.js",O.async=!0,o.body.appendChild(O),(T=o.createElement("script")).onload=function(){ajax(serverUrl+"/widget/feedback/","POST",{k:i,c:e._howuku_country_code,l:e.location.href,uuid:e._h_uuid,isNewUser:l||!l&&getCookie("first_session")===e._h_session?"1":"0"},function(o){var t=JSON.parse(o)[0];if(t&&(e.feedback(t,i,t.feedback_color,cdnServer,serverUrl,c),t.auto_start_feedback)){let o=t.feedback_option_return,n=Number(t.feedback_option_show_after),i=l||!l&&getCookie("first_session")===e._h_session,r=Number(getCookie("unique_session"));(!o||1===o&&i||2===o&&!i&&r>n)&&howuku.feedback.show()}})},T.type="text/javascript",T.crossorigin="anonymous",T.src=cdnServer+"/js/feedback.js?v="+h,T.async=!0,o.body.appendChild(T)}if(!e.feedbackOnly&&p)e._howuku_poll_loaded=!0,(T=o.createElement("script")).onload=function(){startPoll()},T.type="text/javascript",T.crossorigin="anonymous",T.src=cdnServer+"/js/poll.js?v="+h,T.async=!0,o.body.appendChild(T);let n=o.getElementById("wpadminbar");if(!e.feedbackOnly&&(w||m)&&!d&&!n){w||(e.heatmapOnly=1);let t=o.createElement("script");t.onload=function(){y&&howuku.record.start()},t.type="text/javascript",t.crossorigin="anonymous",e.location.host.includes("howuku.com")?t.src=cdnServer+"/js/record-new.js?v="+h:t.src=cdnServer+"/js/record.js?v="+h,t.async=!0,o.body.appendChild(t)}o.addEventListener("click",function(o){try{var t=o.target.textContent.trim().replace(/(  |\n)/g,"");if(function(e){if(!e||1!==e.nodeType)throw new TypeError("Expected a DOM node to check");var o=e.tagName.toLowerCase();return"button"===o||"input"===o&&"button"===e.type||"a"===o}(o.target)&&t&&t.length<=50&&!["DIV","BODY","SECTION","MAIN","TEMPLATE"].includes(o.target.tagName)){var n={event_type:1,event_path:tagIdentity(o.target||o.srcElement).path,event_text:t,session:e._h_session,widget_key:e._h_key,uuid:e._h_uuid,url:e.location.origin+e.location.pathname};navigator.sendBeacon(serverUrl+"/event/addv2",JSON.stringify(n))}}catch(e){}})}})}()};