"use strict";var botPattern="(googlebot/|bot|Googlebot-Mobile|Googlebot-Image|Google favicon|Mediapartners-Google|bingbot|slurp|java|wget|curl|Commons-HttpClient|Python-urllib|libwww|httpunit|nutch|phpcrawl|msnbot|jyxobot|FAST-WebCrawler|FAST Enterprise Crawler|biglotron|teoma|convera|seekbot|gigablast|exabot|ngbot|ia_archiver|GingerCrawler|webmon |httrack|webcrawler|grub.org|UsineNouvelleCrawler|antibot|netresearchserver|speedy|fluffy|bibnum.bnf|findlink|msrbot|panscient|yacybot|AISearchBot|IOI|ips-agent|tagoobot|MJ12bot|dotbot|woriobot|yanga|buzzbot|mlbot|yandexbot|purebot|Linguee Bot|Voyager|CyberPatrol|voilabot|baiduspider|citeseerxbot|spbot|twengabot|postrank|turnitinbot|scribdbot|page2rss|sitebot|linkdex|Adidxbot|blekkobot|ezooms|dotbot|Mail.RU_Bot|discobot|heritrix|findthatfile|europarchive.org|NerdByNature.Bot|sistrix crawler|ahrefsbot|Aboundex|domaincrawler|wbsearchbot|summify|ccbot|edisterbot|seznambot|ec2linkfinder|gslfbot|aihitbot|intelium_bot|facebookexternalhit|yeti|RetrevoPageAnalyzer|lb-spider|sogou|lssbot|careerbot|wotbox|wocbot|ichiro|DuckDuckBot|lssrocketcrawler|drupact|webcompanycrawler|acoonbot|openindexspider|gnam gnam spider|web-archive-net.com.bot|backlinkcrawler|coccoc|integromedb|content crawler spider|toplistbot|seokicks-robot|it2media-domain-crawler|ip-web-crawler.com|siteexplorer.info|elisabot|proximic|changedetection|blexbot|arabot|WeSEE:Search|niki-bot|CrystalSemanticsBot|rogerbot|360Spider|psbot|InterfaxScanBot|Lipperhey SEO Service|CC Metadata Scaper|g00g1e.net|GrapeshotCrawler|urlappendbot|brainobot|fr-crawler|binlar|SimpleCrawler|Livelapbot|Twitterbot|cXensebot|smtbot|bnf.fr_bot|A6-Indexer|ADmantX|Facebot|Twitterbot|OrangeBot|memorybot|AdvBot|MegaIndex|SemanticScholarBot|ltx71|nerdybot|xovibot|BUbiNG|Qwantify|archive.org_bot|Applebot|TweetmemeBot|crawler4j|findxbot|SemrushBot|yoozBot|lipperhey|y!j-asr|Domain Re-Animator Bot|AddThis)",re=new RegExp(botPattern,"i"),allowedPattern="(HowukuBot)",re2=new RegExp(allowedPattern,"i"),isBot=!1;window._h_start=Math.round(+new Date/1e3,0);let pakoTs=+new Date;window.abRedirecting=!1,""===navigator.languages&&(isBot=!0);let checkIfBot=()=>new Promise((e,t)=>{try{navigator.permissions.query({name:"notifications"}).finally(t=>{e(t)}).catch(t=>{e(null)})}catch(t){e(null)}});window._init&&(window.howuku=window._init),checkIfBot().then(function(e){e&&"denied"===Notification.permission&&"prompt"===e.state&&(isBot=!0);var t=navigator.userAgent;(re.test(t)||window.navigator.webdriver||isBot)&&!re2.test(t)||function(e,t){var o=e=>{return new URL(window.location.href).searchParams.get(e)||""},n=e=>{return e.replace(/\#[0-9]/,function(e){return e.replace("#","#\\3")}).replace(/\.[0-9]/,function(e){return e.replace(".",".\\3")})},a=(e,t,o,n)=>{var a=new XMLHttpRequest;a.open(t,e,!0),a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.onreadystatechange=function(){this.readyState===XMLHttpRequest.DONE&&200===this.status&&n(a.responseText)},a.send(JSON.stringify(o))};window.startAbTest=(e=>{localStorage.setItem("_abcache",e);let t=(e,t)=>{let o=null;if("string"==typeof e)try{e=JSON.parse(e)}catch(e){return null}return e&&e[t]&&(e[t].vaId||0===e[t].vaId)&&(o=e[t].vaId),o},a=async(e,t,o,n=null)=>{""===t&&(t="-1");let a=0;function r(e){try{return!(0===Object.keys(e).length&&e.constructor===Object)}catch(e){return!1}}let i=!1,l=[];window.location.href.includes("howuku.com")&&console.log("window.abdata",window.abdata);for(let e=0;e<window.abdata.length;e++)if(r(window.abdata[e].condition)){window.location.href.includes("howuku.com")&&console.log("has condition",window.abdata[e].condition),i=!0;let t=window.abdata[e].condition;if(t.url)for(let o=0;o<t.url.length;o++)if(window.location.href.toString().includes(t.url[o])){l.push(window.abdata[e].name);break}if(t.referrer)for(let o=0;o<t.referrer.length;o++)if(document.referrer.toString().includes(t.referrer[o])){l.push(window.abdata[e].name);break}if(t.preferred_country)for(let o=0;o<t.preferred_country.length;o++)if(n===t.preferred_country[o]){l.push(window.abdata[e].name);break}if(t.showToAll&&(console.log("show all"),!0===t.showToAll)){console.log("show all"),l.push(window.abdata[e].name),console.log(l);break}}if(!i)for(let e=0;e<window.abdata.length;e++)l.push(window.abdata[e].name);var c=l;window.location.href.includes("howuku.com")&&console.log("variantList",l),i||c.push("-1"),window.location.href.includes("howuku.com")&&console.log("variantList2",c),window.location.href.includes("howuku.com")&&console.log("lastVariant",t),0===Number(t)&&(t="-1");var s=c.indexOf(t);!i&&s>=0&&c.splice(s,1);let d;d=1===c.length?c[0]:c[~~((e=>t=>(2**31-1&(e=Math.imul(16807,e)))/2**31)((e=>Math.imul(e,2654435761)>>>0)(e))()*c.length)];let w=null;for(let e in window.abdata)if(window.abdata[e].name===d){a=window.abdata[e].name,w=window.abdata[e].data;break}let u={};try{localStorage.getItem("_variant_result")&&(u=JSON.parse(localStorage.getItem("_variant_result")))}catch(e){}try{u&&(u[o]={vaId:a},window.vaId=JSON.stringify(u),localStorage.setItem("_variant_result",JSON.stringify(u)))}catch(e){}};function r(e){var t=e.parentNode;return(e.scrollTop||t.scrollTop)/(t.scrollHeight-t.clientHeight)*100}let i=null;try{i=JSON.parse(e)}catch(e){}if(e&&i){function l(e){return"string"==typeof e?e.replace(/^www\./g,"").replace(/\/$/g,""):e}for(let e=0;e<i.length;e++){let y=i[e],v=y.test_id,k=new URLSearchParams(window.location.search),_=k.get("test-preview")||null,S=k.get("test-variant")||null;if((!_||Number(v)===Number(_))&&(_&&Number(v)===Number(_)&&console.log("preview id",v),y)){var c=window.location.hostname+window.location.pathname;if("pageview"===y.goal_type){var s=document.createElement("a");s.href=y.goal_value,l(c)===l(s.hostname+s.pathname)&&window.howuku.converted(y.test_key).then(function(){console.log("converted - page visited!")})}if("scrolling"===y.goal_type){let e=y.goal_value,t=!1;document.onscroll=(()=>{var o=r(document.body);Math.round(o)>=Number(e)&&!t&&(t=!0,window.howuku.converted(y.test_key).then(function(){console.log("converted - scrolled!")}))})}if("duration"===y.goal_type){let e=y.goal_value;setTimeout(()=>{window.howuku.converted(y.test_key).then(function(){console.log("converted - stayed for longer than "+e+" seconds!")})},1e3*e)}var d=document.createElement("a");d.href=y.element_url;let e={};try{e=JSON.parse(y.data)}catch(e){}let i=[],v="";try{Object.keys(e).forEach(function(t){v=t;let o=e[t];for(let e=0;e<o.length;e++)if(o[e].data.length){let t=o[e].data[0];t&&t.url&&i.push(t.url)}})}catch(e){console.error(e)}let k=((e,t)=>{for(let o=0;o<t.length;o++){let n=t[o],a=document.createElement("a");if(a.href=n,l(e)===l(a.hostname+a.pathname))return!0}return!1})(c,i);if(l(c)===l(d.hostname+d.pathname)||k){if("clickOnElement"===y.goal_type){let e=document.querySelector(n(y.goal_value));console.log("goal to click on element",e);let t=!1;setTimeout(()=>{e&&e.addEventListener("click",function(o){t||(o.preventDefault(),console.log("goal clicked",y.test_key),window.howuku.converted(y.test_key).then(function(){t=!0,console.log("goal completed",y.test_key),e.click()}))})},4e3)}if("formSubmit"===y.goal_type){let e=document.querySelector(n(y.goal_value));setTimeout(()=>{e&&e.addEventListener("submit",function(t){t.preventDefault(),window.howuku.converted(y.test_key).then(function(){e.submit()})})},4e3)}}var w=window.location.protocol+"//"+window.location.hostname+window.location.pathname,u=window.location.protocol+"//www."+window.location.hostname+window.location.pathname;let _=!1;try{let e=JSON.parse(y.data);_=e[w]||e[w.replace(/\/+$/,"")]||e[u]||e[u.replace(/\/+$/,"")]}catch(e){}if(_&&(window.abdata=_),!_)continue;let x=!y.is_ab;var b=null;let T=null,N=t(window.vaId,y.test_id);S&&(N=S),(null===N||x)&&a(y.seed,y.last_variant,y.test_id,y.user_data.country_code);var g=t(window.vaId,y.test_id);if(S&&(g=S,console.log("preview variant",S)),g){var h=null;for(let e in window.abdata)if(window.abdata[e].name===g){h=window.abdata[e].data;break}h&&(b=h)}if(b){function p(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&#39;").replace(/\//g,"&#x2F;")}function f(e){return e.replace(/{{(([ ]+)?[a-z0-9_-]+([ ]+)?)}}/gi,function(e,t){return p(o(t.trim()))})}function m(e,t=null){return t?e.replace(/{{(([ ]+)?(country|city|country_flag)([ ]+)?)}}/gi,function(e,o){return p(t[o.trim()]||"")}):e}for(let e=0;e<b.length;e++){b[e].url&&(window.abRedirecting=!0,T=b[e].url,window.location.href=T);try{let t=document.querySelectorAll(b[e].target)[b[e].index];t&&b[e].textContent&&(t.textContent=b[e].textContent),t&&b[e].innerHTML&&(t.innerHTML=f(m(b[e].innerHTML.replace(/\&\#039\;/g,"'").replace(/\&\#034\;/g,'"'),y.user_data))),t&&b[e].src&&(t.src=b[e].src),t&&t instanceof HTMLElement&&b[e].style&&t.setAttribute("style",b[e].style),t&&t instanceof HTMLElement&&b[e].class&&t.setAttribute("class",b[e].class)}catch(e){console.error(e)}}}}}}if(window.location.href.includes("howuku.com")){let e=+new Date-pakoTs;window.abRedirecting||(document.body.style.opacity=1),console.log("Variation finishes at "+e+"ms")}if(!window.abRedirecting)try{window.d()}catch(e){}});var r=function(){const o=function(){let e=document.getElementsByTagName("script"),t=0;for(;t<e.length;t++){let o=e[t];if(/(howu\.js|howu-widget\.js|track\.js)/.test(o.getAttribute("src"))&&o.getAttribute("key"))return o}}();window._H_CDN_URL=o.src?o.src.split("/")[2]:"";let n=localStorage.getItem("_abcache");if(n&&window.startAbTest(n),localStorage.removeItem("_abcache"),a("https://api.howuku.com/widget/test","POST",{k:o.getAttribute("key"),h:window.location.host},e=>{try{"[]"!==e?window.startAbTest(e):document.body.style.opacity=1}catch(e){}}),window.location.href.includes("howuku.com")&&setTimeout(()=>{document.body.style.opacity=1},1e3),window.location.href.includes("test-preview="));else{var r=(new Date).getTime(),i=t.createElement("script");i.onload=(()=>{a("https://api.howuku.com/gs","POST",{widgetKey:o.getAttribute("key")},n=>{let a=JSON.parse(n);window.location.href.includes("ct_builder=")||window.location.href.includes("oxygen_iframe=")||window.location.href.includes("ct_template=")||window.location.href.includes("ct_inner=")||control(e,t,o,a.session)})}),i.type="text/javascript",i.async=!0,window.location.href.includes("girlguiding.org.uk")?i.src="https://"+window._H_CDN_URL+"/js/control2.js?v="+r:i.src="https://"+window._H_CDN_URL+"/js/control.js?v="+(l="howuku_version",((c=t.cookie.match("(^|;)\\s*"+l+"\\s*=\\s*([^;]+)"))?c.pop():"")||r),t.body.appendChild(i)}var l,c};"interactive"===t.readyState||"complete"===t.readyState||"loaded"===t.readyState?r():t.addEventListener("DOMContentLoaded",r)}(window,document)});